{% extends "base.html" %}

{% block css %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/poststyle.css') }}">
{% endblock %}
{% block content %}
<div class="centered2 p-4 post-container">
  <h2 class="post-title">{{ post.title }}</h2>
  <img src="{{ url_for('static', filename=post.image) }}" class="post-image" width="300px">
  <p class="post-text">{{ post.text }}</p>
  <p class="post-created">created: {{ post.created }}</p>
  <p class="posted-by">Posted by the user: {{ post.user.username if post.user else 'Unknown user' }}</p>
  <p class="post-type">type: {{ post.type }}</p>
  <p class="post-enabled">enabled: {{ post.enabled }}</p>
  <p class="post-tags">tags:
    {% for tag in post.tags %}
      {{ tag.name }}
      {% if not loop.last %}, {% endif %}
    {% endfor %}
  </p>
  <p class="post-category">category: {{ post.category.name if post.category else 'No category' }}</p>
  {% if current_user.is_authenticated and post.user_id == current_user.id %}
    <button class="post-edit-btn"><a class="post-link" href="{{ url_for('.update_post', id=post.id) }}">Edit post</a></button>
    <form method="POST" onsubmit="return confirm('Confirm deletion')" action="{{ url_for('.delete_post', id=post.id) }}" class="row g-3 post-delete-form">
      <div class="form-outline">
        {{ del_form.hidden_tag() }}
        <button type="submit" class="btn btn-danger ms-1 post-delete-btn">Delete post</button>
      </div>
    </form>
  {% endif %}
</div>
{% endblock %}

